{"version":3,"sources":["catchFishGame.js"],"names":["cc","Class","extends","Component","properties","fish_1","Node","start","testBezier","end","begainPos","position","wuguiAni","getComponent","Animation","play","wrapMode","WrapMode","Loop","bezier_1","v2","winSize","height","bezierTo","fc","callFunc","stop","bind","seq","sequence","runAction","updateFishRotation","restart","console","log","update","dt","updateName","schedule","endPos","curPos","lastPosX","x","lastPosY","y","unschedule","K","Math","atan","rotation","PI"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAOL,GAAGM;AADF,KAHP;AAMLC,SANK,mBAMI;AACL,aAAKC,UAAL;AACH,KARI;;AASLA,gBAAW,sBAAU;AACjB,aAAKC,GAAL,GAAW,KAAX;AACA,aAAKC,SAAL,GAAiB,KAAKL,MAAL,CAAYM,QAA7B;AACA,YAAIC,WAAW,KAAKP,MAAL,CAAYQ,YAAZ,CAAyBb,GAAGc,SAA5B,CAAf;AACAF,iBAASG,IAAT,CAAc,OAAd;AACAH,iBAASI,QAAT,GAAoBhB,GAAGiB,QAAH,CAAYC,IAAhC;;AAGA,YAAIC,WAAW,CAACnB,GAAGoB,EAAH,CAAM,CAAN,EAASpB,GAAGqB,OAAH,CAAWC,MAAX,GAAoB,CAA7B,CAAD,EAAkCtB,GAAGoB,EAAH,CAAM,GAAN,EAAW,CAACpB,GAAGqB,OAAH,CAAWC,MAAZ,GAAqB,CAAhC,CAAlC,EAAsEtB,GAAGoB,EAAH,CAAM,GAAN,EAAW,GAAX,CAAtE,CAAf;AACA,YAAIG,WAAWvB,GAAGuB,QAAH,CAAY,EAAZ,EAAgBJ,QAAhB,CAAf;;AAEA;AACA;AACA;AACA;AACA,YAAIK,KAAKxB,GAAGyB,QAAH,CAAY,YAAU;AAC3B,iBAAKpB,MAAL,CAAYM,QAAZ,GAAuB,KAAKD,SAA5B;AACA,gBAAIE,WAAW,KAAKP,MAAL,CAAYQ,YAAZ,CAAyBb,GAAGc,SAA5B,CAAf;AACCF,qBAASc,IAAT,CAAc,OAAd;AACD,iBAAKjB,GAAL,GAAW,IAAX;AACH,SALoB,CAKnBkB,IALmB,CAKd,IALc,CAAZ,CAAT;AAMA,YAAIC,MAAM5B,GAAG6B,QAAH,CAAYN,QAAZ,EAAsBC,EAAtB,CAAV;AACA,aAAKnB,MAAL,CAAYyB,SAAZ,CAAsBF,GAAtB;AACA,aAAKG,kBAAL;AACH,KAjCI;;AAmCLC,aAAQ,mBAAU;AACd,YAAG,CAAC,KAAKvB,GAAT,EAAa;AACTwB,oBAAQC,GAAR,CAAY,SAAZ;AACA;AACH;;AAED,aAAK1B,UAAL;AACH,KA1CI;AA2CL2B,UA3CK,kBA2CGC,EA3CH,EA2CO,CAEX,CA7CI;AA8CLL,sBA9CK,gCA8Ce;AAChB,aAAKM,UAAL,GAAkB,KAAKC,QAAL,CAAc,YAAU;AACtC,gBAAIC,SAAS,IAAIvC,GAAGoB,EAAP,CAAU,GAAV,EAAe,GAAf,CAAb;AACA,gBAAIV,YAAY,IAAIV,GAAGoB,EAAP,CAAU,CAAC,GAAX,EAAgB,CAAhB,CAAhB;AACA,gBAAIoB,SAAS,KAAKnC,MAAL,CAAYM,QAAzB;AACA,gBAAI8B,WAAWD,OAAOE,CAAP,GAAW,CAA1B;AACA,gBAAIC,WAAWH,OAAOI,CAAP,GAAW,CAA1B;AACA,gBAAIJ,UAAUD,MAAV,IAAkBC,UAAU9B,SAAhC,EAA0C;AACtC,qBAAKmC,UAAL,CAAiB,KAAKR,UAAtB;AACA;AACH;AACD,gBAAIS,IAAIC,KAAKC,IAAL,CAAU,CAACR,OAAOE,CAAP,GAAWD,QAAZ,KAAuBD,OAAOI,CAAP,GAAWD,QAAlC,CAAV,CAAR;AACA,iBAAKtC,MAAL,CAAY4C,QAAZ,GAAwBH,IAAI,EAAJ,GAAOC,KAAKG,EAApC;AACH,SAZ+B,CAY9BvB,IAZ8B,CAYzB,IAZyB,CAAd,EAYH,KAZG,CAAlB;AAaH;AA5DI,CAAT","file":"catchFishGame.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        fish_1:cc.Node,\r\n    },\r\n    start () {\r\n        this.testBezier();\r\n    },\r\n    testBezier:function(){\r\n        this.end = false;\r\n        this.begainPos = this.fish_1.position\r\n        let wuguiAni = this.fish_1.getComponent(cc.Animation);\r\n        wuguiAni.play(\"wugui\");\r\n        wuguiAni.wrapMode = cc.WrapMode.Loop;\r\n\r\n\r\n        var bezier_1 = [cc.v2(0, cc.winSize.height / 2), cc.v2(300, -cc.winSize.height / 2), cc.v2(500, 100)];\r\n        var bezierTo = cc.bezierTo(10, bezier_1);\r\n\r\n        // var bezier_2 = [cc.v2(cc.winSize.width/4, 0), cc.v2(cc.winSize.width*3/4, cc.winSize.height), cc.v2(cc.winSize.width, 0)]\r\n        // var bezierTo_2 = cc.bezierTo(10, bezier_2)\r\n        // var bezier = [cc.p(0,0), cc.p(50,100), cc.p(900,0)];\r\n        // var bezierBy = cc.bezierBy(10, bezier);\r\n        var fc = cc.callFunc(function(){\r\n            this.fish_1.position = this.begainPos\r\n            let wuguiAni = this.fish_1.getComponent(cc.Animation);\r\n             wuguiAni.stop(\"wugui\");\r\n            this.end = true;\r\n        }.bind(this));\r\n        var seq = cc.sequence(bezierTo, fc);\r\n        this.fish_1.runAction(seq);\r\n        this.updateFishRotation();\r\n    },\r\n\r\n    restart:function(){\r\n        if(!this.end){\r\n            console.log(\"not end\");\r\n            return\r\n        }\r\n        \r\n        this.testBezier();\r\n    },\r\n    update (dt) {\r\n    \r\n    },\r\n    updateFishRotation(){\r\n        this.updateName = this.schedule(function(){\r\n            let endPos = new cc.v2(900, 100);\r\n            let begainPos = new cc.v2(-430, 8)\r\n            let curPos = this.fish_1.position;\r\n            let lastPosX = curPos.x + 1\r\n            let lastPosY = curPos.y + 1\r\n            if (curPos == endPos||curPos == begainPos){\r\n                this.unschedule( this.updateName);\r\n                return;\r\n            }\r\n            let K = Math.atan((curPos.x - lastPosX)/(curPos.y - lastPosY));\r\n            this.fish_1.rotation = (K * 90/Math.PI);\r\n        }.bind(this),  0.001)\r\n    }\r\n});\r\n"]}